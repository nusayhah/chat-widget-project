<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Widget Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .content {
            line-height: 1.8;
            font-size: 1.1em;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .feature {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .cta {
            text-align: center;
            margin: 40px 0;
        }
        
        .btn {
            display: inline-block;
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .widget-demo {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 40px 0;
        }
        
        .demo-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .demo-btn {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .demo-btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸš€ Chat Widget Test Page</h1>
        
        <div class="content">
            <p>Welcome to our test page! This page demonstrates the chat widget functionality. The widget should appear in the bottom-right corner of your screen.</p>
            
            <div class="features">
                <div class="feature">
                    <h3>ðŸ’¬ Real-time Chat</h3>
                    <p>Instant messaging with WebSocket support</p>
                </div>
                <div class="feature">
                    <h3>ðŸŽ¨ Customizable</h3>
                    <p>Colors, position, and messages can be configured</p>
                </div>
                <div class="feature">
                    <h3>ðŸ“± Responsive</h3>
                    <p>Works perfectly on desktop and mobile devices</p>
                </div>
                <div class="feature">
                    <h3>âš¡ Fast Loading</h3>
                    <p>Lightweight and optimized for performance</p>
                </div>
            </div>
            
            <div class="widget-demo">
                <h3>Widget Demo Controls</h3>
                <div class="demo-controls">
                    <button class="demo-btn" onclick="openWidget()">Open Widget</button>
                    <button class="demo-btn" onclick="closeWidget()">Close Widget</button>
                    <button class="demo-btn" onclick="sendTestMessage()">Send Test Message</button>
                    <button class="demo-btn" onclick="changeTheme()">Change Theme</button>
                </div>
                <p><strong>Instructions:</strong> Try clicking the chat button in the bottom-right corner, or use the controls above to interact with the widget programmatically.</p>
            </div>
            
            <div class="cta">
                <h3>Ready to add this to your website?</h3>
                <p>Just add one line of code to your website:</p>
                <code style="background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px; display: block; margin: 20px 0;">
                    &lt;script src="https://your-domain.com/widget.js" data-site-key="your-site-key"&gt;&lt;/script&gt;
                </code>
                <a href="#" class="btn">Get Started Now</a>
            </div>
        </div>
    </div>

    <!-- Chat Widget Script -->
    <script src="widget/dist/widget.js" data-site-key="demo-site-key"></script>
    
    <script>
        // Demo widget instance
        let widget = null;
        
        // Initialize widget when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Widget should auto-initialize from data attribute
            // But we can also create a custom instance
            setTimeout(() => {
                widget = new ChatWidget({
                    siteKey: 'demo-site-key',
                    apiUrl: 'http://localhost:3001/api',
                    businessName: 'Demo Support',
                    widgetTitle: 'Chat with Demo Team',
                    welcomeMessage: 'Hi! This is a demo of our chat widget. Try sending a message!',
                    primaryColor: '#007bff',
                    secondaryColor: '#6c757d',
                    position: 'bottom-right'
                });
            }, 1000);
        });
        
        // Demo control functions
        function openWidget() {
            if (widget) {
                widget.open();
            }
        }
        
        function closeWidget() {
            if (widget) {
                widget.close();
            }
        }
        
        function sendTestMessage() {
            // Simulate receiving a message
            if (widget) {
                widget.open();
                // This would normally come from the WebSocket
                setTimeout(() => {
                    const event = new MessageEvent('message', {
                        data: JSON.stringify({
                            type: 'message',
                            id: 'demo-msg-' + Date.now(),
                            message: 'This is a demo message from our support team! ðŸ‘‹',
                            timestamp: new Date().toISOString()
                        })
                    });
                    
                    // Simulate WebSocket message
                    if (widget.websocket && widget.websocket.onmessage) {
                        widget.websocket.onmessage(event);
                    }
                }, 1000);
            }
        }
        
        function changeTheme() {
            const colors = [
                { primary: '#007bff', secondary: '#6c757d' },
                { primary: '#28a745', secondary: '#6c757d' },
                { primary: '#dc3545', secondary: '#6c757d' },
                { primary: '#6f42c1', secondary: '#6c757d' },
                { primary: '#fd7e14', secondary: '#6c757d' }
            ];
            
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            
            if (widget) {
                widget.destroy();
                setTimeout(() => {
                    widget = new ChatWidget({
                        siteKey: 'demo-site-key',
                        apiUrl: 'http://localhost:3001/api',
                        businessName: 'Demo Support',
                        widgetTitle: 'Chat with Demo Team',
                        welcomeMessage: 'Theme changed! How do you like the new colors?',
                        primaryColor: randomColor.primary,
                        secondaryColor: randomColor.secondary,
                        position: 'bottom-right'
                    });
                }, 500);
            }
        }
        
        // Add some interactive elements
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('btn')) {
                e.preventDefault();
                alert('This is a demo page. In a real implementation, this would redirect to your signup page!');
            }
        });
    </script>
</body>
</html>